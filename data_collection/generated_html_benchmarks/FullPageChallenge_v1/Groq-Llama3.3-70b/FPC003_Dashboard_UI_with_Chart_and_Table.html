<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom CSS for chart styling */
        .chart-container {
            max-width: 800px;
            margin: 40px auto;
        }
    </style>
</head>
<body>
    <header data-testid="dashboard-header" class="bg-gray-800 text-white p-4 fixed top-0 left-0 w-full">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold">Admin Dashboard</h1>
            <button data-testid="user-profile-trigger" class="bg-gray-700 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded">
                User Profile
            </button>
        </div>
    </header>
    <div class="flex flex-col md:flex-row">
        <nav data-testid="dashboard-sidebar" role="navigation" class="bg-gray-200 p-4 md:w-64 md:h-screen fixed top-16 left-0 md:static md:overflow-y-auto">
            <button data-testid="sidebar-toggle" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded mb-4 md:hidden" aria-expanded="false">
                Toggle Sidebar
            </button>
            <ul class="md:hidden">
                <li class="mb-4">
                    <a href="#" class="text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300">Dashboard</a>
                </li>
                <li class="mb-4">
                    <a href="#" class="text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300">Analytics</a>
                </li>
                <li class="mb-4">
                    <a href="#" class="text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300">Reports</a>
                </li>
                <li class="mb-4">
                    <a href="#" class="text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300">Settings</a>
                </li>
            </ul>
            <ul class="hidden md:block">
                <li class="mb-4">
                    <a href="#" class="text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300">Dashboard</a>
                </li>
                <li class="mb-4">
                    <a href="#" class="text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300">Analytics</a>
                </li>
                <li class="mb-4">
                    <a href="#" class="text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300">Reports</a>
                </li>
                <li class="mb-4">
                    <a href="#" class="text-gray-800 font-bold py-2 px-4 rounded hover:bg-gray-300">Settings</a>
                </li>
            </ul>
        </nav>
        <main role="main" class="flex-1 p-4 md:p-6">
            <h2 class="text-2xl font-bold mb-4">Key Metrics</h2>
            <div class="flex flex-wrap justify-center mb-4">
                <div data-testid="metric-card-1" class="bg-white p-4 rounded shadow-md w-full md:w-1/2 xl:w-1/4 mb-4 md:mb-0 md:mr-4">
                    <h3 class="text-lg font-bold mb-2">Total Users</h3>
                    <p class="text-2xl font-bold">1,234</p>
                </div>
                <div data-testid="metric-card-2" class="bg-white p-4 rounded shadow-md w-full md:w-1/2 xl:w-1/4 mb-4 md:mb-0 md:mr-4">
                    <h3 class="text-lg font-bold mb-2">Revenue</h3>
                    <p class="text-2xl font-bold">$56,789</p>
                </div>
                <div data-testid="metric-card-3" class="bg-white p-4 rounded shadow-md w-full md:w-1/2 xl:w-1/4 mb-4 md:mb-0 md:mr-4">
                    <h3 class="text-lg font-bold mb-2">Active Sessions</h3>
                    <p class="text-2xl font-bold">123</p>
                </div>
                <div data-testid="metric-card-4" class="bg-white p-4 rounded shadow-md w-full md:w-1/2 xl:w-1/4 mb-4 md:mb-0">
                    <h3 class="text-lg font-bold mb-2">Bounce Rate</h3>
                    <p class="text-2xl font-bold">12.34%</p>
                </div>
            </div>
            <div class="chart-container">
                <canvas data-testid="sales-chart" aria-label="Sales per Month" role="img"></canvas>
            </div>
            <table data-testid="orders-table" class="w-full table-auto mb-4">
                <thead>
                    <tr>
                        <th scope="col" class="px-4 py-2">Order ID</th>
                        <th scope="col" class="px-4 py-2">Customer Name</th>
                        <th scope="col" data-testid="sort-orders-by-Date" aria-sort="none" class="px-4 py-2 cursor-pointer">Date</th>
                        <th scope="col" class="px-4 py-2">Amount</th>
                        <th scope="col" class="px-4 py-2">Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="px-4 py-2">12345</td>
                        <td class="px-4 py-2">John Doe</td>
                        <td class="px-4 py-2">2022-01-01</td>
                        <td class="px-4 py-2">$100.00</td>
                        <td class="px-4 py-2">Pending</td>
                    </tr>
                    <tr>
                        <td class="px-4 py-2">67890</td>
                        <td class="px-4 py-2">Jane Doe</td>
                        <td class="px-4 py-2">2022-01-15</td>
                        <td class="px-4 py-2">$200.00</td>
                        <td class="px-4 py-2">Shipped</td>
                    </tr>
                </tbody>
            </table>
        </main>
    </div>
    <script>
        // Get the sidebar toggle button
        const sidebarToggle = document.querySelector('[data-testid="sidebar-toggle"]');

        // Get the sidebar
        const sidebar = document.querySelector('[data-testid="dashboard-sidebar"]');

        // Add event listener to the sidebar toggle button
        sidebarToggle.addEventListener('click', () => {
            // Toggle the sidebar
            sidebar.classList.toggle('md:w-64');
            sidebar.classList.toggle('md:h-screen');
            sidebar.classList.toggle('fixed');
            sidebar.classList.toggle('top-16');
            sidebar.classList.toggle('left-0');
            sidebar.classList.toggle('md:static');
            sidebar.classList.toggle('md:overflow-y-auto');

            // Update the aria-expanded attribute
            sidebarToggle.setAttribute('aria-expanded', sidebar.classList.contains('md:w-64') ? 'true' : 'false');
        });

        // Get the chart canvas
        const chartCanvas = document.querySelector('[data-testid="sales-chart"]');

        // Create a new chart
        const chart = new Chart(chartCanvas, {
            type: 'bar',
            data: {
                labels: ['January', 'February', 'March', 'April', 'May'],
                datasets: [{
                    label: 'Sales',
                    data: [100, 200, 300, 400, 500],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)',
                        'rgba(75, 192, 192, 0.2)',
                        'rgba(153, 102, 255, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)',
                        'rgba(75, 192, 192, 1)',
                        'rgba(153, 102, 255, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Get the orders table
        const ordersTable = document.querySelector('[data-testid="orders-table"]');

        // Get the sort by date button
        const sortByDateButton = document.querySelector('[data-testid="sort-orders-by-Date"]');

        // Add event listener to the sort by date button
        sortByDateButton.addEventListener('click', () => {
            // Sort the orders table by date
            const rows = ordersTable.rows;
            const sortedRows = Array.prototype.slice.call(rows).sort((a, b) => {
                const dateA = a.cells[2].textContent;
                const dateB = b.cells[2].textContent;
                return dateA.localeCompare(dateB);
            });

            // Update the orders table
            ordersTable.tBodies[0].innerHTML = '';
            sortedRows.forEach(row => {
                ordersTable.tBodies[0].appendChild(row);
            });

            // Update the aria-sort attribute
            sortByDateButton.setAttribute('aria-sort', 'ascending');
        });
    </script>
</body>
</html>